
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2015-10-18
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>SensorHub Core &#x2013; Sensor Network API</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />
 
		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/spacelab/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="../css/bootswatch.css" rel="stylesheet" />
		<link href="../css/reflow-skin.css" rel="stylesheet" />

		<link href="http://yandex.st/highlightjs/7.5/styles/default.min.css" rel="stylesheet" />

		<link href="../css/lightbox.css" rel="stylesheet" />

		<link href="../css/site.css" rel="stylesheet" />
		<link href="../css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->


		
<link rel="icon" href="../images/favicon.ico?v=1"/>
		<!-- Google Analytics -->
		<script type="text/javascript">

			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-5799482-4']);
			_gaq.push(['_trackPageview']);

			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();

		</script>
		</head>

	<body class="page-sensornet-api project-sensorhub-core" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<div class="brand">OpenSensorHub</div>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li ><a href="https://github.com/opensensorhub" title="GitHub" class="externalLink">GitHub</a></li>
							<li ><a href="../report-errors.html" title="Report an Error">Report an Error</a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting Started <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../download.html" title="Download">Download</a></li>
									<li ><a href="../install.html" title="Install">Install</a></li>
									<li ><a href="../user-guide.html" title="User's Guide">User's Guide</a></li>
									<li ><a href="../dev-guide.html" title="Developer's Guide">Developer's Guide</a></li>
									<li ><a href="your-first-sensor.html" title="Your First Sensor Driver">Your First Sensor Driver</a></li>
									<li ><a href="apidocs/index.html" title="Javadocs">Javadocs</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Components <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="index.html" title="Core APIs">Core APIs</a></li>
									<li ><a href="../sensorhub-service-swe/index.html" title="SWE Services">SWE Services</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="http://www.opensensorhub.org/" id="bannerLeft"><h1>Open Sensor Hub</h1></a>
					<p class="lead">Software For Building Smart Sensor Networks</p>
				</div>
				<div class="pull-right">
					<div id="bannerRight"><img src="../images/logo.png" alt='"''"' /></div>
				</div>
			</div>
		</div>
	</div>
		<div>
			<ul class="breadcrumb">
				<li><a href="../index.html" title="Docs">Docs</a></li>
				<li class="divider">/</li>
				<li><a href="./" title="SensorHub Core">SensorHub Core</a></li>
				<li class="divider">/</li>
				<li>Sensor Network API</li>
			</ul>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span8">
			<div class="body-content">
<div class="section"> 
 <div class="page-header">
  <h2 id="Sensor_Network_API">Sensor Network API</h2>
 </div> 
 <p>This page presents an extension of the base <a href="sensor-api.html">Sensor API</a> that allows one to implement drivers for sensor networks of any size as a single SensorHub module. This API is used in addition to the base sensor API when one needs to wrap such a sensor network instead of just a single sensor.</p> 
 <p>In addition to the base sensor API methods, a sensor network module would have to implement the <a class="externalLink" href="https://github.com/opensensorhub/osh-core/blob/master/sensorhub-core/src/main/java/org/sensorhub/api/data/IMultiSourceDataProducer.java">‘IMultiSourceDataProducer’</a> interface which allows providing <a href="#Sensor_Descriptions">Sensor Descriptions</a> and <a href="#Features_of_Interest">Features of Interest</a> (FOI) for multiple <a href="#Entities">Entities</a>:</p> 
 <div class="section"> 
  <h3 id="Entities">Entities</h3> 
  <p>The ‘IMultiSourceDataProducer’ interface is based on the concept of <i>Entity</i>: An entity represents one member of the network. We use the term entity because this interface can also be used for other things than sensor networks, such as process grids.</p> 
  <p>For sensor networks, each entity usually corresponds to one sensor (or one measurement system such as a weather station) in the network. Although sensors in a network often measure the same quantities, it is not always the case, so SensorHub allows for completely heterogeneous sensors to be part of the same network.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Sensor_Descriptions">Sensor Descriptions</h3> 
  <p>The sensor network driver is responsible for providing sensor descriptions for each entity via the <tt>getCurrentDescription(String entityId)</tt> method. This description can contain information specific to that entity such as its location (when fixed) and calibration tables for example.</p> 
  <p>Since the driver also inherits the original methods from the base <a href="sensor-api.html">Sensor API</a>, the <tt>getCurrentDescription()</tt> method shall be used to provide a description of the network as a whole. This description usually contains the list of sensors that are part of the network as SensorML components (for large networks, this will be preferably done by reference). It is also important to include discovery related information in this description since it is the only one directly referenced by the capabilities document of SWE services.</p> 
  <p>Changes in the network or in a given entity configuration are notified using a <a class="externalLink" href="https://github.com/opensensorhub/osh-core/sensorhub/blob/master/sensorhub-core/src/main/java/org/sensorhub/api/sensor/SensorEvent.java">SensorEvent</a>. In the case of an entity change, use the constructor with the sensorID.</p> 
  <p><i>Note: As for single sensors, the driver is only required to provide the most current sensor descriptions. Maintenance of the history of descriptions is done by storage modules in SensorHub.</i></p> 
 </div> 
 <div class="section"> 
  <h3 id="Features_of_Interest">Features of Interest</h3> 
  <p>In a sensor network, there can be as many features of interest (FOI) as there are entities in the network at any given point in time (e.g. for a network of weather station, there is one static sampling point per station). The FOI associated with each entity is provided via the <tt>getCurrentFeatureOfInterest(String entityID)</tt> method.</p> 
  <p>Since the driver also inherits the original methods from the base <a href="sensor-api.html">Sensor API</a>, the <tt>getCurrentFeatureOfInterest()</tt> method shall be used to provide a FOI for the network as a whole (e.g. The FOI for a river monitoring sensor network is the river itself, while the FOI for each station/entity would be a sampling point at the station location). This corresponds to the sampled feature in the O&amp;M model.</p> 
  <p>When one of the features of interest changes (as usually happens in networks of mobile sensors), this can be notified using an <a class="externalLink" href="https://github.com/opensensorhub/osh-core/sensorhub/blob/master/sensorhub-core/src/main/java/org/sensorhub/api/data/FoiEvent.java">FoiEvent</a>. If the FOI observed by one of the sensor changes (e.g. the sensor was moved to a new location), use the constructor with the entityID.</p> 
  <p><i>Note: As for single sensors, the driver is only required to provide the feature of interest currently being observed. Maintenance of the history of FOIs is done by storage modules in SensorHub.</i></p> 
 </div> 
 <div class="section"> 
  <h3 id="Network_Output">Network Output</h3> 
  <p>For sensor networks, the observation output(s) should include a field indicating the ID of the entity that generated the data record. For instance, the record description for weather measurements coming from a network of weather station could be such as:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>&lt;swe:DataRecord definition=&quot;http://sensorml.com/ont/swe/property/WeatherData&quot;&gt;
    &lt;swe:field name=&quot;time&quot;&gt;
        &lt;swe:Time
            definition=&quot;http://www.opengis.net/def/property/OGC/0/SamplingTime&quot; referenceFrame=&quot;http://www.opengis.net/def/trs/BIPM/0/UTC&quot;&gt;
            &lt;swe:label&gt;Sampling Time&lt;/swe:label&gt;
            &lt;swe:uom xlink:href=&quot;http://www.opengis.net/def/uom/ISO-8601/0/Gregorian&quot;/&gt;
        &lt;/swe:Time&gt;
    &lt;/swe:field&gt;
    &lt;swe:field name=&quot;stationID&quot;&gt;
        &lt;swe:Text definition=&quot;http://sensorml.com/ont/swe/property/StationID&quot;&gt;
            &lt;swe:label&gt;Station ID&lt;/swe:label&gt;
        &lt;/swe:Text&gt;
    &lt;/swe:field&gt;
    &lt;swe:field name=&quot;temp&quot;&gt;
        &lt;swe:Quantity definition=&quot;http://sensorml.com/ont/swe/property/Temperature&quot;&gt;
            &lt;swe:label&gt;Air Temperature&lt;/swe:label&gt;
            &lt;swe:uom code=&quot;degF&quot;/&gt;
        &lt;/swe:Quantity&gt;
    &lt;/swe:field&gt;
    &lt;swe:field name=&quot;humidity&quot;&gt;
        &lt;swe:Quantity definition=&quot;http://sensorml.com/ont/swe/property/HumidityValue&quot;&gt;
            &lt;swe:label&gt;Relative Humidity&lt;/swe:label&gt;
            &lt;swe:uom code=&quot;%&quot;/&gt;
        &lt;/swe:Quantity&gt;
    &lt;/swe:field&gt;
    &lt;swe:field name=&quot;press&quot;&gt;
        &lt;swe:Quantity definition=&quot;http://sensorml.com/ont/swe/property/AirPressureValue&quot;&gt;
            &lt;swe:label&gt;Atmospheric Pressure&lt;/swe:label&gt;
            &lt;swe:uom code=&quot;[in_i]Hg&quot;/&gt;
        &lt;/swe:Quantity&gt;
    &lt;/swe:field&gt;
&lt;/swe:DataRecord&gt;
</pre> 
   </div> 
  </div> 
  <p>Notice the field `stationID’ whose value would be the ID of the entity/station that generated the record.</p> 
 </div> 
</div>
			</div>
		</div>
		<div class="span4">
			<div id="toc-sidebar">
				<div class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Table of Contents</li>
		<li class="dropdown"><a href="#Sensor_Network_API" title="Sensor Network API">Sensor Network API <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Entities" title="Entities">Entities</a>
		<li><a href="#Sensor_Descriptions" title="Sensor Descriptions">Sensor Descriptions</a>
		<li><a href="#Features_of_Interest" title="Features of Interest">Features of Interest</a>
		<li><a href="#Network_Output" title="Network Output">Network Output</a>
				<li class="divider"></li>
			</ul>
		</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span1 bottom-nav">
					<ul class="nav nav-list">
					</ul>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2015 <a href="http://www.sensiasoftware.com">Sensia Software LLC</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 1.0. </span><span class="publishDate">Last Published: 2015-10-18. </span></p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="../js/lightbox.min.js"></script>
	<script src="../js/reflow-scroll.js"></script>
	<script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="../js/reflow-skin.js"></script>

	</body>
</html>
