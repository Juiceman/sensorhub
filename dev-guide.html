
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2015-09-28
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>OpenSensorHub &#x2013; Developers Guide</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />
 
		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/spacelab/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href=".//css/bootswatch.css" rel="stylesheet" />
		<link href=".//css/reflow-skin.css" rel="stylesheet" />

		<link href="http://yandex.st/highlightjs/7.5/styles/default.min.css" rel="stylesheet" />

		<link href=".//css/lightbox.css" rel="stylesheet" />

		<link href=".//css/site.css" rel="stylesheet" />
		<link href=".//css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->


		
<link rel="icon" href="../images/favicon.ico?v=1"/>
		<!-- Google Analytics -->
		<script type="text/javascript">

			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-5799482-4']);
			_gaq.push(['_trackPageview']);

			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();

		</script>
		</head>

	<body class="page-dev-guide project-sensorhub-all" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<div class="brand">OpenSensorHub</div>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li ><a href="https://github.com/sensiasoft/sensorhub/tree/master" title="GitHub" class="externalLink">GitHub</a></li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting Started <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="download.html" title="Download">Download</a></li>
									<li ><a href="install.html" title="Install">Install</a></li>
									<li ><a href="user-guide.html" title="User's Guide">User's Guide</a></li>
									<li class="active"><a href="" title="Developer's Guide">Developer's Guide</a></li>
									<li ><a href="sensorhub-core/your-first-sensor.html" title="Your First Sensor Driver">Your First Sensor Driver</a></li>
									<li ><a href="sensorhub-core/apidocs/index.html" title="Javadocs">Javadocs</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Components <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="sensorhub-core/index.html" title="Core APIs">Core APIs</a></li>
									<li ><a href="sensorhub-service-swe/index.html" title="SWE Services">SWE Services</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="http://www.opensensorhub.org/" id="bannerLeft"><h1>Open Sensor Hub</h1></a>
					<p class="lead">Software For Building Smart Sensor Networks</p>
				</div>
				<div class="pull-right">
					<div id="bannerRight"><img src="images/logo.png" alt='"''"' /></div>
				</div>
			</div>
		</div>
	</div>
		<div>
			<ul class="breadcrumb">
				<li><a href="index.html" title="Docs">Docs</a></li>
				<li class="divider">/</li>
				<li>Developers Guide</li>
			</ul>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span8">
			<div class="body-content">
<div class="section"> 
 <div class="page-header">
  <h2 id="Developers_Guide">Developer’s Guide</h2>
 </div> 
 <p>This guide is meant to help you setup a development environment based on the Eclipse IDE so that you can extend SensorHub with your own sensor drivers, web services and other components.</p> 
 <p>Don’t forget to send us a Pull Request if you want to contribute your work back to this project. Other users may be interested by your modules and bug fixes! </p> 
 <p>Of course, contributing new modules to the community is optional as our license does not prevent proprietary and commercial derived work. However, keep in mind that <b>if you modify the source files we provide, you must make it available publicly in source form</b>. </p> 
 <p>This page provides instructions for three possible options, depending on your level of involvement:</p> 
 <ul> 
  <li>Exploring the code online</li> 
  <li>Downloading and building from source with Maven or Eclipse</li> 
  <li>Contributing software and fixes to the project</li> 
 </ul> 
 <div class="section"> 
  <h3 id="Exploring_the_Code">Exploring the Code</h3> 
  <p>If you just want to explore the code, you can browse the source online directly on <a class="externalLink" href="https://github.com/sensiasoft/sensorhub">Github</a>. Alternatively, you can download it to your computer using the <i>Download ZIP</i> link on GitHub or using the <tt>git</tt> program (please see the next section if you want to do just that).</p> 
 </div> 
 <div class="section"> 
  <h3 id="Downloading_and_Building_from_Source">Downloading and Building from Source</h3> 
  <p>Below are the steps to download and build the code using either command line tools or the Eclipse IDE.</p> 
  <div class="section"> 
   <h4 id="Using_Command-Line_Tools">Using Command-Line Tools</h4> 
   <p>If you want to build the code and run it on your computer, you’ll need <tt>git</tt> and <tt>Maven 3</tt>. To clone the code repository locally, first <tt>cd</tt> in the directory where you want the code to be downloaded and use the following command:</p> 
   <div class="source"> 
    <div class="source"> 
     <pre> &gt; git clone --recursive https://github.com/sensiasoft/sensorhub
</pre> 
    </div> 
   </div> 
   <p>This will create a folder called “sensorhub” containing the code of the different Maven modules in your current directory. You can then build the project and install it to your local Maven repository by launching the following commands:</p> 
   <div class="source"> 
    <div class="source"> 
     <pre> &gt; cd sensorhub
 &gt; mvn clean install 
</pre> 
    </div> 
   </div> 
   <p><i>Note 1: The first time you launch Maven, the build process can take a while because Maven goes to fetch its own dependencies (i.e. Maven plugins) as well as SensorHub’s dependencies. Later builds will go faster because these dependencies are cached in a local Maven repository.</i></p> 
   <p><i>Note 2: Some of the JUnit tests automatically run during the ‘test’ phase of the SensorHub build process need to instantiate a server on port 8888. These tests will fail if something else is running on this port when you launch the commands above.</i></p> 
   <p>You can then run SensorHub with an example configuration file. For instance, the following command launches SensorHub with the simulated sensors provided in the default build:</p> 
   <div class="source"> 
    <div class="source"> 
     <pre> &gt; mvn -N -e exec:java -Dexec.mainClass=&quot;org.sensorhub.impl.SensorHub&quot; -Dexec.args=&quot;sensorhub-test/src/test/resources/config_fakesensors_with_storage.json db&quot;
</pre> 
    </div> 
   </div> 
   <p>If you want to add other modules than the ones included in the default build, go to the module folder and do a <tt>mvn clean install</tt> there. You will then be able to use a configuration file that uses this new module.</p> 
  </div> 
  <div class="section"> 
   <h4 id="Using_Eclipse">Using Eclipse</h4> 
   <p>We provide Eclipse project configuration directly from the repository so it is the easiest way to get started, especially if you’re already familiar with Eclipse. </p> 
   <ol style="list-style-type: decimal"> 
    <li>Pre-requisites</li> 
   </ol> 
   <p>Make sure you have the following Eclipse components installed :</p> 
   <ul> 
    <li>Eclipse Helios or newer (the exact steps described here are for Luna)</li> 
    <li>Egit plugin for Eclipse (included in “Eclipse IDE for Java Developers” release)</li> 
    <li>Maven plugin for Eclipse M2E (you can install it using the “Help &gt; Install New Software..”. You will find it under the “Collaboration” section of the Eclipse releases repository)</li> 
   </ul> 
   <ol style="list-style-type: decimal"> 
    <li>Clone the project in your Eclipse workspace</li> 
   </ol> 
   <ul> 
    <li>In the Package Explorer, right click and select “Import” from the popup menu</li> 
    <li>Open the “Git” category, select “Projects from Git” and click “Next”</li> 
    <li>Select “Clone URI” and click “Next”</li> 
    <li>In the “URI” text box, enter the URL of the sensorhub repository <a class="externalLink" href="https://github.com/sensiasoft/sensorhub.git">https://github.com/sensiasoft/sensorhub.git</a> and click “Next”</li> 
    <li>Leave “master” selected and click “Next”</li> 
    <li>You can leave the Directory settings as-is on this page or change it to the location of your choice (Note that the Egit manual discourages cloning directly in the Eclipse workspace for performance reasons, however we haven’t had any issue doing this with the sensorhub code base. If you want to do like us, change the “Directory” to points directly to a sub-directory of your Eclipse workspace, for instance, “/home/user/workspace/sensorhub”)</li> 
    <li>Select “Clone submodules” and click “Next”</li> 
    <li>After the download is complete, leave “Import existing projects” selected and click “Next”</li> 
    <li>Leave all projects selected and click “Finish”</li> 
    <li>All projects should be imported successfully and visible in the “Package Explorer”. Everything should compile without error.</li> 
    <li>If you like to keep your workspace tidy, you can group all the projects we just imported in a single Working Set</li> 
   </ul> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Contributing_Code_to_the_Project">Contributing Code to the Project</h3> 
  <p>If you want to contribute, please follow the following steps:</p> 
  <div class="section"> 
   <h4 id="Fork_the_project">Fork the project</h4> 
   <p>The first step is to fork the project by clicking the <a class="externalLink" href="http://help.github.com/articles/fork-a-repo/">Fork</a> button on GitHub. This will clone the original code to your own GitHub account so you can then modify it and/or add to it as you wish. For this you’ll need to have a GitHub account (it can be done in 30s using your email address) and log into it.</p> 
   <p>Forking the project this way will allow you to send us <a class="externalLink" href="http://help.github.com/articles/using-pull-requests/">Pull Requests</a> via GitHub which makes it much easier for us to incorporate your contribution to the master branch. In addition, it creates a community around the software and lets others see what contributors are up to even before a patch is submitted. This can help you get the proper guidance when necessary.</p> 
  </div> 
  <div class="section"> 
   <h4 id="Clone_your_GitHub_repository">Clone your GitHub repository</h4> 
   <p>Clone your new GitHub repository locally by following the steps in the <a href="#Option_2_Download_and_Build">Download and Build</a> section using your own fork URL (e.g. <a class="externalLink" href="https://github.com/yourusername/sensorhub">https://github.com/yourusername/sensorhub</a>) instead of the <i>sensiasoft</i> branch URL. Don’t forget to also input your <i>login</i> and <i>password</i> so you can later write to your repository.</p> 
  </div> 
  <div class="section"> 
   <h4 id="Work_on_something_new">Work on something new!</h4> 
   <p>You can then start modifying the code and/or add new modules/features. We don’t have coding guidelines yet but try to mimic the code that is already there. Don’t forget to include Javadoc especially on public parts of your APIs.</p> 
   <p>Don’t hesitate to tell us early-on what you’re planning to work on. We may be able to point you in the right direction or maybe to somebody who has similar needs than you.</p> 
  </div> 
  <div class="section"> 
   <h4 id="Get_the_latest_updates_from_us">Get the latest updates from us</h4> 
   <p>While you’re working on your stuff, don’t forget to pull changes from the main repository once in a while. This will greatly help us merge your changes into the main branch when we receive your Pull Request. You can either do that from command line git or within Eclipse:</p> 
   <div class="section"> 
    <h5 id="Using_the_git_command">Using the <tt>git</tt> command</h5> 
    <p>First add a new remote pointing to the <i>sensiasoft</i> master branch (you only have to do that the first time):</p> 
    <div class="source"> 
     <div class="source"> 
      <pre> &gt; git remote add upstream https://github.com/sensiasoft/sensorhub
</pre> 
     </div> 
    </div> 
    <p>Then pull changes from the “upstream” remote:</p> 
    <div class="source"> 
     <div class="source"> 
      <pre> &gt; git pull upstream master
 &gt; git submodule update
</pre> 
     </div> 
    </div> 
    <p><i>Note that you may have to manually merge things with your working copy if you have made conflicting changes.</i></p> 
   </div> 
   <div class="section"> 
    <h5 id="Using_Eclipse">Using Eclipse</h5> 
    <p>First add a new remote pointing to the <i>sensiasoft</i> master branch (you only have to do that the first time):</p> 
    <ul> 
     <li>Open the “Git Repositories” view (Window -&gt; Show view -&gt; Other -&gt; Git)</li> 
     <li>Open the “sensorhub” repository, right click on “Remotes” and select “Create Remote”</li> 
     <li>Enter “upstream” as the remote name, select “Configure fetch” and click “OK”</li> 
     <li>Click the “Change” button next to the URI text box</li> 
     <li>Enter <a class="externalLink" href="https://github.com/sensiasoft/sensorhub">https://github.com/sensiasoft/sensorhub</a> as the URI and click “Finish”</li> 
     <li>Click “Save”</li> 
    </ul> 
    <p>Then pull changes from the “upstream” remote:</p> 
    <ul> 
     <li>Open the “Git Repositories” view (Window -&gt; Show view -&gt; Other -&gt; Git)</li> 
     <li>Right click on the “sensorhub” repository and select “Remote -&gt; Fetch” in the popup menu</li> 
     <li>Select the “sensiasoft” remote in the “Configured remote repository” item and click “Finish”</li> 
     <li>Right click on the “Submodules” folder and select “Update submodule” from the popup menu</li> 
    </ul> 
    <p>You’ll then eventually have to merge our changes with yours using the Egit merge command.</p> 
    <p>Note: Also don’t forget to import new Eclipse projects that may have been added since your last update. For this, follow these steps:</p> 
    <ul> 
     <li>Right click in your workspace and select “Import…” in the context menu</li> 
     <li>Select “Existing project into workspace” from the “General” section and click “Next”</li> 
     <li>Browse to the folder where you clones our repo (usually called “sensorhub”)</li> 
     <li>Select the missing projects in the list (all the projects that are not already in your workspace should already be selected) and click “Finish”</li> 
    </ul> 
   </div> 
  </div> 
  <div class="section"> 
   <h4 id="Push_your_changes_to_your_own_repo">Push your changes to your own repo</h4> 
   <p>You can push your changes to your own GitHub repo at any time, even if your code doesn’t work yet. Remember this is your own sandbox so you won’t mess up anybody else code base. We actually recommend that you do that often since it will provide you a good backup of your work, with full history.</p> 
   <div class="section"> 
    <h5 id="Using_the_git_command">Using the <tt>git</tt> command</h5> 
    <p>To do this with git command line tool, first stage and commit your changes locally:</p> 
    <div class="source"> 
     <div class="source"> 
      <pre> &gt; git commit -am &quot;Your commit message&quot;
</pre> 
     </div> 
    </div> 
    <p>and then push them to your remote GitHub repository:</p> 
    <div class="source"> 
     <div class="source"> 
      <pre> &gt; git push
</pre> 
     </div> 
    </div> 
    <p>(Please see the <a class="externalLink" href="http://git-scm.com/book/en/v2">git online documentation</a> for more details and other ways to use git)</p> 
   </div> 
   <div class="section"> 
    <h5 id="Using_Eclipse">Using Eclipse</h5> 
    <p>Within Eclipse, follow these steps:</p> 
    <p>To commit your changes locally:</p> 
    <ul> 
     <li>Right click on one of the Eclipse project with a name starting with “sensorhub”</li> 
     <li>Select “Team -&gt; Commit” from the popup menu</li> 
     <li>Enter a commit message and select files you want to commit</li> 
     <li>Click “Commit” (or “Commit and Push” if you want to commit locally and push to your remote repository in a single step)</li> 
     <li>If you have just pressed “Commit” you will see a arrow with a number on the right of the project names in the package explorer. This indicates that you have N local changes that need to be pushed to the remote repository (i.e. in git terms, your local repository is N commits ahead of your remote).</li> 
    </ul> 
    <p>If you only want to push your last committed changes to your remote repository:</p> 
    <ul> 
     <li>Right click on one of the Eclipse project with a name starting with “sensorhub”</li> 
     <li>Select “Team -&gt; Push to Upstream” from the popup menu</li> 
     <li>Click OK</li> 
    </ul> 
    <p>(Please see <a class="externalLink" href="http://wiki.eclipse.org/EGit/User_Guide">Egit online documentation</a> for more advanced functionality)</p> 
   </div> 
  </div> 
  <div class="section"> 
   <h4 id="Contribute_your_code">Contribute your code</h4> 
   <p>When you feel you’re ready to contribute all or some of your changes to the community, please send us a <a class="externalLink" href="http://help.github.com/articles/using-pull-requests/">Pull Request</a> via GitHub.</p> 
   <p>So that we can better evaluate your contribution, please describe your improvements in as much details as you can. We’ll do our best to process <i>Pull Request</i> as fast as possible.</p> 
   <p><b>Thanks in advance for your contribution!</b></p> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Eclipse_Tips">Eclipse Tips</h3> 
  <p>One problem we have encountered several times with Eclipse is that the POM files and Projects Settings get out of sync and it causes various Java and/or Maven related dependency errors (e.g. dependency YYY cannot be found, etc). If you get such errors although everything seems fine in your POM and code, you may have to follow these steps to resync eveything:</p> 
  <ul> 
   <li>Click one of the SensorHub module project</li> 
   <li>Select “Maven &gt; Update Project…” from the context menu</li> 
   <li>Click the “Select All” button</li> 
   <li>Confirm by clicking “OK”</li> 
  </ul> 
 </div> 
</div>
			</div>
		</div>
		<div class="span4">
			<div id="toc-sidebar">
				<div class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Table of Contents</li>
		<li class="dropdown"><a href="#Developers_Guide" title="Developer’s Guide">Developer’s Guide <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Exploring_the_Code" title="Exploring the Code">Exploring the Code</a>
		<li class="dropdown"><a href="#Downloading_and_Building_from_Source" title="Downloading and Building from Source">Downloading and Building from Source <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Using_Command-Line_Tools" title="Using Command-Line Tools">Using Command-Line Tools</a>
		<li><a href="#Using_Eclipse" title="Using Eclipse">Using Eclipse</a>
				<li class="divider"></li>
			</ul>
		</li>
		<li class="dropdown"><a href="#Contributing_Code_to_the_Project" title="Contributing Code to the Project">Contributing Code to the Project <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Fork_the_project" title="Fork the project">Fork the project</a>
		<li><a href="#Clone_your_GitHub_repository" title="Clone your GitHub repository">Clone your GitHub repository</a>
		<li><a href="#Work_on_something_new" title="Work on something new!">Work on something new!</a>
		<li class="dropdown"><a href="#Get_the_latest_updates_from_us" title="Get the latest updates from us">Get the latest updates from us <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Using_the_git_command" title="Using the git command">Using the git command</a>
		<li><a href="#Using_Eclipse" title="Using Eclipse">Using Eclipse</a>
				<li class="divider"></li>
			</ul>
		</li>
		<li class="dropdown"><a href="#Push_your_changes_to_your_own_repo" title="Push your changes to your own repo">Push your changes to your own repo <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Using_the_git_command" title="Using the git command">Using the git command</a>
		<li><a href="#Using_Eclipse" title="Using Eclipse">Using Eclipse</a>
				<li class="divider"></li>
			</ul>
		</li>
		<li><a href="#Contribute_your_code" title="Contribute your code">Contribute your code</a>
				<li class="divider"></li>
			</ul>
		</li>
		<li><a href="#Eclipse_Tips" title="Eclipse Tips">Eclipse Tips</a>
				<li class="divider"></li>
			</ul>
		</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span1 bottom-nav">
					<ul class="nav nav-list">
					</ul>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2015 <a href="http://www.sensiasoftware.com">Sensia Software LLC</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 1.0. </span><span class="publishDate">Last Published: 2015-09-28. </span></p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src=".//js/lightbox.min.js"></script>
	<script src=".//js/reflow-scroll.js"></script>
	<script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src=".//js/reflow-skin.js"></script>

	</body>
</html>
