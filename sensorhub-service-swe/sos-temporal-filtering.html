
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2015-09-23
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>SensorHub SWE Services &#x2013; Temporal Filtering in SensorHub SOS</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />
 
		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/spacelab/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="../css/bootswatch.css" rel="stylesheet" />
		<link href="../css/reflow-skin.css" rel="stylesheet" />

		<link href="http://yandex.st/highlightjs/7.5/styles/default.min.css" rel="stylesheet" />

		<link href="../css/lightbox.css" rel="stylesheet" />

		<link href="../css/site.css" rel="stylesheet" />
		<link href="../css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->


		
<link rel="icon" href="../images/favicon.ico?v=1"/>
		<!-- Google Analytics -->
		<script type="text/javascript">

			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-5799482-4']);
			_gaq.push(['_trackPageview']);

			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();

		</script>
		</head>

	<body class="page-sos-temporal-filtering project-sensorhub-service-swe" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<div class="brand">OpenSensorHub</div>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li ><a href="https://github.com/sensiasoft/sensorhub/tree/master" title="GitHub" class="externalLink">GitHub</a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting Started <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../download.html" title="Download">Download</a></li>
									<li ><a href="../install.html" title="Install">Install</a></li>
									<li ><a href="../dev-guide.html" title="Dev Guide">Dev Guide</a></li>
									<li ><a href="../sensorhub-core/apidocs/index.html" title="Javadocs">Javadocs</a></li>
									<li ><a href="../sensorhub-core/your-first-sensor.html" title="First Sensor Driver">First Sensor Driver</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Components <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../sensorhub-core/index.html" title="Core APIs">Core APIs</a></li>
									<li ><a href="index.html" title="SWE Services">SWE Services</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="http://www.opensensorhub.org/" id="bannerLeft"><h1>Open Sensor Hub</h1></a>
					<p class="lead">Software For Building Smart Sensor Networks</p>
				</div>
				<div class="pull-right">
					<div id="bannerRight"><img src="../images/logo.png" alt='"''"' /></div>
				</div>
			</div>
		</div>
	</div>
		<div>
			<ul class="breadcrumb">
				<li><a href="../index.html" title="OpenSensorHub">OpenSensorHub</a></li>
				<li class="divider">/</li>
				<li><a href="./" title="SensorHub SWE Services">SensorHub SWE Services</a></li>
				<li class="divider">/</li>
				<li>Temporal Filtering in SensorHub SOS</li>
			</ul>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span8">
			<div class="body-content">
<div class="section"> 
 <div class="page-header">
  <h2 id="Temporal_Filtering_in_SensorHub_SOS">Temporal Filtering in SensorHub SOS</h2>
 </div> 
 <p>SensorHub’s SOS implementation supports both <b>historical</b> and <b>real-time</b> requests for sensor data.</p> 
 <p>Historical requests are automatically enabled (and properly advertised in the capabilities) when a storage is configured and associated to a sensor.</p> 
 <p>Likewise, real-time requests are automatically enabled when a sensor is directly connected to the SOS (and the sensor module is itself enabled and reports the sensor as connected).</p> 
 <p>Regarding temporal filtering, SensorHub’s implementation only supports the <b>TEquals</b> operator for time instants and <b>During</b> operator for time periods and, currently, filtering can only be done on the ‘phenomenonTime’ property. The special value ‘now’ represents the limit between historical and real-time data.</p> 
 <p>The following tables explain how the server responds to different temporal filter settings:</p> 
 <div class="section"> 
  <h3 id="Time_Instants">Time Instants</h3> 
  <table border="0" class="bodyTable table table-striped table-hover"> 
   <thead> 
    <tr class="a"> 
     <th align="left"><b>Behavior</b> </th> 
     <th align="left"><b>Request</b> </th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr class="b"> 
     <td align="left">Get observation at exact time </td> 
     <td align="left"><tt>temporalFilter=phenomenonTime,2014-04-01T00:00:00Z</tt> </td> 
    </tr> 
    <tr class="a"> 
     <td align="left">Get latest observation </td> 
     <td align="left"><tt>temporalFilter=phenomenonTime,now</tt> </td> 
    </tr> 
   </tbody> 
  </table> 
 </div> 
 <div class="section"> 
  <h3 id="Time_Periods">Time Periods</h3> 
  <p><i>In all the examples below, ‘now’ is considered to be at 2014-02-20 and we assume storage contains data until this date.</i></p> 
  <table border="0" class="bodyTable table table-striped table-hover"> 
   <thead> 
    <tr class="a"> 
     <th align="left"><b>Behavior</b> </th> 
     <th align="left"><b>Request</b> </th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr class="b"> 
     <td align="left">Get observations for a historical time range </td> 
     <td align="left"><tt>temporalFilter=phenomenonTime,2014-01-01/2014-02-01</tt> </td> 
    </tr> 
    <tr class="a"> 
     <td align="left">Get historical data up to the latest observation </td> 
     <td align="left"><tt>temporalFilter=phenomenonTime,2014-01-01/now</tt> </td> 
    </tr> 
    <tr class="b"> 
     <td align="left">Get real-time stream ending at specific time (1,2) </td> 
     <td align="left"><tt>temporalFilter=phenomenonTime,now/2014-03-01</tt> </td> 
    </tr> 
    <tr class="a"> 
     <td align="left">Get observations for a time range overlapping past and future (1,3) (<i>not supported for now</i>) </td> 
     <td align="left"><tt>temporalFilter=time,2014-01-01/2014-03-01</tt> </td> 
    </tr> 
   </tbody> 
  </table> 
  <p>(1) A real-time stream is only available through a persistent connection if sampling period is lower than a certain threshold (usually a few seconds). For lower rate data producers, the subscription service can be used (<b>TODO:</b> implement SOS subscription service)</p> 
  <p>(2) The stream will be closed as soon as an observation more recent than the end date is produced. A date very far in the future can be used to get a virtually never ending data stream.</p> 
  <p>(3) If real-time streaming is available, the stream will be closed as in (2). Otherwise it will be closed right after the latest available observation has been sent, even if it is much earlier than the end date (i.e. the request will be treated as <tt>temporalFilter=time,2014-01-01/now</tt>).</p> 
  <p><i>Note: Dates used are in the ISO8601 format and can include the time part or not (e.g. both 2014-01-01Z and 2013-05-06T12:05:00.111Z are valid). When no time is specified, midnight (00:00:00) is assumed.</i></p> 
 </div> 
 <div class="section"> 
  <h3 id="Replay_Extension">Replay Extension</h3> 
  <p>The SOS implementation also supports replaying historical observations at arbitrary speed (i.e. at real-time speed, or slower/faster than real-time). This is supported by adding the <tt>replaySpeed</tt> parameter to a historical GetResult KVP request, such as in <tt>temporalFilter=phenomenonTime,2014-01-01/2014-02-01&amp;replaySpeed=2</tt>. The parameter has no effect for a live stream request (i.e. if the requested period starts at ‘now’)</p> 
  <p>Observations are replayed at exactly real-time speed (according to observations time tags) with <tt>replaySpeed=1</tt>. The replay value is in fact a factor relative to real-time so that 10 means replaying 10x faster than real-time (if bandwidth permits!) and 0.1 means replaying 10x slower than real-time.</p> 
  <p>SensorHub implements this functionality by pausing the SOS data provider thread just the right amount of time to match the period infered by two successive measurement time stamps.</p> 
 </div> 
</div>
			</div>
		</div>
		<div class="span4">
			<div id="toc-sidebar">
				<div class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Table of Contents</li>
		<li class="dropdown"><a href="#Temporal_Filtering_in_SensorHub_SOS" title="Temporal Filtering in SensorHub SOS">Temporal Filtering in SensorHub SOS <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Time_Instants" title="Time Instants">Time Instants</a>
		<li><a href="#Time_Periods" title="Time Periods">Time Periods</a>
		<li><a href="#Replay_Extension" title="Replay Extension">Replay Extension</a>
				<li class="divider"></li>
			</ul>
		</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span1 bottom-nav">
					<ul class="nav nav-list">
					</ul>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2015 <a href="http://www.sensiasoftware.com">Sensia Software LLC</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 1.0. </span><span class="publishDate">Last Published: 2015-09-23. </span></p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="../js/lightbox.min.js"></script>
	<script src="../js/reflow-scroll.js"></script>
	<script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="../js/reflow-skin.js"></script>

	</body>
</html>
